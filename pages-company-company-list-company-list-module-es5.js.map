{"version":3,"sources":["webpack:///src/app/pages/company/company-list/company-list.component.html","webpack:///src/app/pages/company/company-list/company-list.component.ts","webpack:///src/app/pages/company/company-list/company-list.module.ts"],"names":["CompanyListComponent","router","paginationService","companyService","dataService","loadform","loadingState","objectArray","pagination","searchText","currentPage","permissionObject","PageTitle","headerData","setHeaderData","getObjects","push","label","key","viewUrl","path","id","canEdit","canDelete","canView","actions","actionColom","params","page","search","getCompanyList","subscribe","response","success","data","list","getPager","error","text","obj","onCompanySelect","selectCompany","company_id","saveToken","Token","updateCompany","Company","navigateByUrl","selector","template","routes","component","title","loadChildren","then","m","CompanyAddModule","CompanyViewModule","CompanyListModule","declarations","imports","forChild"],"mappings":"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","file":"pages-company-company-list-company-list-module-es5.js","sourcesContent":["export default \"<div class=\\\"container-fluid\\\">\\r\\n  <div class=\\\"page-header\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col d-flex\\\">\\r\\n        <h2 class=\\\"mr-auto\\\">{{PageTitle}}</h2>\\r\\n        <div class=\\\"ml-3\\\">\\r\\n          <search-box (text)=\\\"searchObject($event)\\\" [placeholder]=\\\"'Search Here...'\\\"></search-box>\\r\\n        </div>\\r\\n        <div class=\\\"ml-3\\\">\\r\\n          <app-btn-add [btnName]=\\\"'Add Company'\\\" [editData]=\\\"'/company/add'\\\"></app-btn-add>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"card\\\">\\r\\n    <div class=\\\"card-body\\\">\\r\\n      <app-table-list [headerData]=\\\"headerData\\\" [rawData]=\\\"objectArray\\\" (reloadEvent)=\\\"onReloadEvent()\\\"\\r\\n        (clickEvent)=\\\"onClickEvent($event)\\\"></app-table-list>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","declare var swal: any;\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CompanyService } from 'src/app/service/company.service';\r\nimport { DataService } from 'src/app/service/data.service';\r\nimport { CompanyAddComponent } from '../company-add/company-add.component';\r\nimport { PaginationService } from 'src/app/service/pagination.service';\r\nimport { TextClickEventField, ActionField, TextField } from '../../../common-module/table-list/list-field-type';\r\n\r\n\r\n@Component({\r\n  selector: 'app-company-list',\r\n  templateUrl: './company-list.component.html'\r\n})\r\nexport class CompanyListComponent implements OnInit {\r\n  action: any;\r\n  loadform = false;\r\n  loadingState = true;\r\n  objectArray: Array<any> = [];\r\n  pagination: any = null;\r\n  searchText: any = null;\r\n  currentPage: any = 1;\r\n  permissionObject: any = null;\r\n\r\n  PageTitle = \"Company\";\r\n\r\n  //For Dynamic List\r\n  headerData: Array<any> = [];\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private paginationService: PaginationService,\r\n    private companyService: CompanyService,\r\n    private dataService: DataService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    // this.dataService.permission.subscribe((perms) => {\r\n    //   this.permissionObject = perms['company'];\r\n    // });\r\n    this.loadform = false;\r\n    this.setHeaderData();\r\n    this.getObjects();\r\n  }\r\n  setHeaderData() {\r\n    this.headerData.push(\r\n      new TextClickEventField({\r\n        label: \"Company Name\",\r\n        key: \"company_name\",\r\n        viewUrl: {\r\n          path: '/company/edit/',\r\n          id: 'company_id'\r\n        }\r\n      }),\r\n      new TextField({\r\n        label: \"Company Email\",\r\n        key: \"company_email\",\r\n      }),\r\n    );\r\n    let canEdit = true;\r\n    let canDelete = false;\r\n    let canView =true;\r\n    let actions = {};\r\n    if (canEdit) {\r\n      actions['edit'] = {\r\n        path: '/company/edit/',\r\n        id: 'company_id'\r\n      }\r\n    }\r\n    if (canDelete) {\r\n      actions['delete'] = {\r\n        path: 'company/',\r\n        id: 'company_id'\r\n      }\r\n    }\r\n    if (canView) {\r\n      actions['view'] = {\r\n        path: '/company/view/',\r\n        id: 'company_id'\r\n      }\r\n    }\r\n    let actionColom = new ActionField(actions);\r\n    this.headerData.push(\r\n      actionColom\r\n    );\r\n  }\r\n\r\n  getObjects() {\r\n    const params: any = { page: this.currentPage };\r\n    if (this.searchText) {\r\n      params.search = this.searchText;\r\n    }\r\n    this.companyService.getCompanyList(params).subscribe((response) => {\r\n      this.loadingState = false;\r\n      if (response.success) {\r\n\r\n        this.objectArray = response.data.list;\r\n        this.pagination = this.paginationService.getPager(response.data.pagination['total_page'], this.currentPage);\r\n      } else {\r\n        this.objectArray = [];\r\n        this.pagination = null;\r\n      }\r\n    }, (error) => {\r\n      this.loadingState = false;\r\n      this.objectArray = [];\r\n      this.pagination = null;\r\n    });\r\n  }\r\n\r\n\r\n  getPage(page: number) {\r\n    this.currentPage = page;\r\n    this.getObjects();\r\n  }\r\n\r\n  searchObject(text) {\r\n    this.searchText = text;\r\n    this.currentPage = 1;\r\n    this.getObjects();\r\n  }\r\n\r\n\r\n\r\n  onReloadEvent() {\r\n    this.getObjects();\r\n  }\r\n\r\n  onClickEvent(obj) {\r\n    this.onCompanySelect(obj);\r\n  }\r\n\r\n  onCompanySelect(obj) {\r\n    this.companyService.selectCompany(obj.company_id).subscribe((response) => {\r\n      if (response.success) {\r\n        this.dataService.saveToken(response.data.Token['token']);\r\n        this.dataService.updateCompany(response.data.Company);\r\n        this.router.navigateByUrl('/dashboard');\r\n      } else {\r\n        this.objectArray = [];\r\n        this.pagination = null;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CompanyListComponent } from './company-list.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { TableViewModule } from 'src/app/common-module/table-view/table-view.module';\r\nimport { BtnAddModule } from 'src/app/common-module/btn-add/btn-add.module';\r\nimport { SearchModule } from 'src/app/common-module/search/search.module';\r\nimport { TableListModule } from '../../../common-module/table-list/table-list.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CompanyListComponent,\r\n    data: { title: 'company_list' }\r\n  },\r\n  {\r\n    path: 'add',\r\n    loadChildren: () => import('../company-add/company-add.module').then(m => m.CompanyAddModule),\r\n    data: { title: 'add_company' }\r\n  },\r\n  {\r\n    path: 'edit/:id',\r\n    loadChildren: () => import('../company-add/company-add.module').then(m => m.CompanyAddModule),\r\n    data: { title: 'edit_company' }\r\n  },\r\n  {\r\n    path: 'view/:id',\r\n    loadChildren: () => import('../company-view/company-view.module').then(m => m.CompanyViewModule),\r\n    data: { title: 'company_list' }\r\n  },\r\n \r\n];\r\n\r\n@NgModule({\r\n  declarations: [CompanyListComponent],\r\n  imports: [\r\n    CommonModule,\r\n    SearchModule,\r\n    BtnAddModule,\r\n    TableViewModule,\r\n    TableListModule,\r\n    RouterModule.forChild(routes)\r\n  ]\r\n})\r\nexport class CompanyListModule { }\r\n"]}