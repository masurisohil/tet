{"version":3,"sources":["webpack:///src/app/pages/outbound/packing/add-packing/add-packing.component.html","webpack:///src/app/pages/outbound/packing/add-packing/add-packing.component.ts","webpack:///src/app/pages/outbound/packing/add-packing/add-packing.module.ts"],"names":["AddPackingComponent","packingService","activatedRoute","fb","router","orderNumberArray","packTypeArray","loadingState","showLoader","formErrors","apierror","order_id","product","isEditing","editId","productDetailList","snapshot","paramMap","get","addForm","group","sales_order_id","compose","required","pack_type","remark","batch_no","serial_no","cartoon_no","product_detail_list","getMasterData","subscribe","responce","success","data","sales_order","patchValue","value","getSalesOrderDetail","id","orderDetails","productAdd","addObject","console","log","length","filter","obj","tag_list","temp","i","push","formData","valid","map","object","Object","weight_unit","weight","product_qty","tag","FormData","append","JSON","stringify","editPacking","response","navigateByUrl","error","hasOwnProperty","addPacking","static","selector","template","routes","path","component","AddPackingModule","declarations","imports","forChild","providers"],"mappings":"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","file":"add-packing-add-packing-module-es5.js","sourcesContent":["export default \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"page-header\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col d-flex\\\">\\r\\n                <h2 class=\\\"mr-auto\\\">Add Packing </h2>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"card\\\">\\r\\n        <form [formGroup]=\\\"addForm\\\" (ngSubmit)=\\\"submitForm(addForm)\\\" role=\\\"form\\\">\\r\\n            <div class=\\\"card-body\\\">\\r\\n                <div class=\\\"mb-3\\\">\\r\\n                    <div class=\\\"col-12\\\">\\r\\n                        <div class=\\\"form-group row align-items-center\\\" [ngClass]=\\\"{'has-error': formErrors.order_id}\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Select Order Number</label>\\r\\n\\r\\n                            <ng-select style=\\\"width:180px\\\" [formControl]=\\\"addForm.controls['sales_order_id']\\\"\\r\\n                                [items]=\\\"orderNumberArray\\\" (change)=\\\"onOrderChange($event)\\\" bindLabel=\\\"label\\\"\\r\\n                                bindValue=\\\"value\\\" placeholder=\\\"Select Order\\\">\\r\\n                            </ng-select>\\r\\n                            <span *ngIf=\\\"formErrors.order_id\\\" class=\\\"help-block\\\"\\r\\n                                [innerHTML]=\\\"formErrors.order_id\\\"></span>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Packing Type</label>\\r\\n                            <ng-select style=\\\"width: 180px;\\\" [formControl]=\\\"addForm.controls['pack_type']\\\"\\r\\n                                placeholder=\\\"Select Packing Type\\\" [items]=\\\"packTypeArray\\\" bindLabel=\\\"label\\\"\\r\\n                                bindValue=\\\"value\\\">\\r\\n                            </ng-select>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Remark</label>\\r\\n                            <input type=\\\"text\\\" style=\\\"width: 180px;\\\" [formControl]=\\\"addForm.controls['remark']\\\"\\r\\n                                class=\\\"form-control \\\" placeholder=\\\"\\\">\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Batch No.</label>\\r\\n                            <input type=\\\"text\\\" style=\\\"width: 180px;\\\" [formControl]=\\\"addForm.controls['batch_no']\\\"\\r\\n                                class=\\\"form-control \\\" placeholder=\\\"\\\">\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Serial No</label>\\r\\n                            <input type=\\\"text\\\" style=\\\"width: 180px;\\\" [formControl]=\\\"addForm.controls['serial_no']\\\"\\r\\n                                class=\\\"form-control \\\" placeholder=\\\"\\\">\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Cartoon No</label>\\r\\n                            <input type=\\\"text\\\" style=\\\"width: 180px;\\\" [formControl]=\\\"addForm.controls['cartoon_no']\\\"\\r\\n                                class=\\\"form-control \\\" placeholder=\\\"\\\" readonly>\\r\\n                        </div>\\r\\n                        <div class=\\\"form-group row align-items-center\\\">\\r\\n                            <label class=\\\"control-label text-md-right col-md-4 col-lg-3\\\">Add Products</label>\\r\\n                            <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"addProduct()\\\">\\r\\n                                Add\\r\\n                            </button>\\r\\n                            <span *ngIf=\\\"formErrors.product\\\" class=\\\"help-block\\\" [innerHTML]=\\\"formErrors.product\\\"></span>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row mt-4\\\">\\r\\n                    <div class=\\\"col-12\\\">\\r\\n                        <div *ngIf=\\\"orderDetails?.sales_order_detail\\\" class=\\\"border p-2\\\">\\r\\n                            <div class=\\\"row\\\">\\r\\n                                <div class=\\\"col-6\\\">\\r\\n                                    <h6>{{orderDetails?.sales_order_detail?.client?.label}}</h6>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-6 text-right\\\">\\r\\n                                    <div>Pallet Number: {{orderDetails?.sales_order_detail?.pallet_no}}</div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"row mt-2\\\">\\r\\n                                <div class=\\\"col-md-6\\\">\\r\\n                                    <p class=\\\"mb-1\\\">Order No.\\r\\n                                        <span>{{orderDetails?.sales_order_detail?.sales_order_no}}</span></p>\\r\\n                                    <p class=\\\"mb-1\\\">Item No. <span>{{orderDetails?.sales_order_detail?.itm_no}}</span>\\r\\n                                    </p>\\r\\n                                    <p class=\\\"mb-1\\\">Description.\\r\\n                                        <span>{{orderDetails?.sales_order_detail?.description}}</span></p>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-md-6 text-right\\\">\\r\\n                                    <div class=\\\"w-25 ml-auto\\\">\\r\\n                                        {{orderDetails?.sales_order_detail?.shipping_address[0].street_address}}\\r\\n\\r\\n                                        {{orderDetails?.sales_order_detail?.shipping_address[0].label}}-\\r\\n                                        {{orderDetails?.sales_order_detail?.shipping_address[0].state}}\\r\\n\\r\\n\\r\\n\\r\\n                                        {{orderDetails?.sales_order_detail?.shipping_address[0].country_name}}-\\r\\n                                        {{orderDetails?.sales_order_detail?.shipping_address[0].pin_code}}\\r\\n\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n\\r\\n                        </div>\\r\\n                        <div class=\\\"mt-2\\\">\\r\\n                            <div class=\\\"table-responsive\\\">\\r\\n                                <table class=\\\"table\\\">\\r\\n                                    <thead class=\\\"thead-dark\\\">\\r\\n                                        <tr>\\r\\n                                            <th width=\\\"10%\\\">No.</th>\\r\\n                                            <th width=\\\"15%\\\">Product Code</th>\\r\\n                                            <th width=\\\"55%\\\">Product </th>\\r\\n                                            <th width=\\\"10%\\\">Tag</th>\\r\\n                                            <th width=\\\"10%\\\">Weight</th>\\r\\n                                        </tr>\\r\\n                                    </thead>\\r\\n                                    <tbody>\\r\\n                                        <tr *ngFor=\\\"let prodLists of productDetailList; let i =index\\\">\\r\\n                                            <td>{{i + 1}}</td>\\r\\n                                            <td>{{prodLists?.product?.sku_no}}</td>\\r\\n                                            <td>{{prodLists?.product?.label}}</td>\\r\\n                                            <td>{{prodLists?.tag?.label}}</td>\\r\\n                                            <td>{{prodLists?.product?.weight}}\\r\\n                                                {{prodLists?.product?.weight_unit}}\\r\\n                                            </td>\\r\\n                                        </tr>\\r\\n                                        <tr *ngIf=\\\"productDetailList.length == 0\\\">\\r\\n                                            <td colspan=\\\"5\\\">No records found</td>\\r\\n                                        </tr>\\r\\n                                    </tbody>\\r\\n                                </table>\\r\\n                            </div>\\r\\n                        </div>\\r\\n\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"text-right border-top py-4 card-footer\\\">\\r\\n                <a [routerLink]=\\\"['/outbound/packing']\\\" class=\\\"btn btn-light\\\">Cancel</a>\\r\\n                <button type=\\\"submit\\\" class=\\\"btn btn-secondary ml-2\\\">Done</button></div>\\r\\n        </form>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n<app-product-list-popup [ProductList]=\\\"orderDetails?.product_list\\\" (onProductSubmit)=\\\"onProductSubmit($event)\\\">\\r\\n</app-product-list-popup>\"","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ProductListPopupComponent } from 'src/app/common-module/product-list-popup/product-list-popup.component';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CommonFunction } from 'src/app/common';\r\nimport { PackingService } from 'src/app/service/packing.service';\r\n\r\n@Component({\r\n  selector: 'app-add-packing',\r\n  templateUrl: './add-packing.component.html',\r\n})\r\nexport class AddPackingComponent implements OnInit {\r\n\r\n  @ViewChild(ProductListPopupComponent, { static: false }) productAdd;\r\n  orderNumberArray: any = [];\r\n  packTypeArray: any = [];\r\n  orderDetails: any;\r\n\r\n  loadingState = false;\r\n  addForm: FormGroup;\r\n  showLoader = false;\r\n  formErrors = {\r\n    apierror: null,\r\n    order_id: null,\r\n    product: null\r\n  };\r\n  isEditing = false;\r\n  editId = null;\r\n  productDetailList: any = []\r\n\r\n  constructor(\r\n    private packingService: PackingService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n  ) {\r\n    if (this.activatedRoute.snapshot.paramMap.get('id')) {\r\n      this.isEditing = true;\r\n      this.editId = this.activatedRoute.snapshot.paramMap.get('id');\r\n    }\r\n    this.addForm = this.fb.group({\r\n      sales_order_id: [null, Validators.compose([Validators.required])],\r\n      pack_type: [null, Validators.compose([Validators.required])],\r\n      remark: [null],\r\n      batch_no: [null],\r\n      serial_no: [null],\r\n      cartoon_no: [null],\r\n      product_detail_list: [],\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // if (this.isEditing) {\r\n    //   this.getEditObject()\r\n    // }\r\n    this.getMasterData();\r\n  }\r\n  getMasterData() {\r\n    this.packingService.getMasterData({}).subscribe((responce) => {\r\n      if (responce.success) {\r\n        this.orderNumberArray = responce.data.sales_order ? responce.data.sales_order : [];\r\n        this.packTypeArray = responce.data.pack_type ? responce.data.pack_type : [];\r\n        this.addForm.patchValue({ cartoon_no: responce.data.cartoon_no })\r\n      }\r\n    });\r\n  }\r\n\r\n  onOrderChange(data) {\r\n    if (data && data.value) {\r\n      this.getSalesOrderDetail(data.value);\r\n      this.formErrors.order_id = null;\r\n    }\r\n  }\r\n  getSalesOrderDetail(id) {\r\n    this.packingService.getSalesOrderDetail(id).subscribe((responce) => {\r\n      if (responce.success) {\r\n        this.orderDetails = responce.data;\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  addProduct() {\r\n    if (this.addForm.value.sales_order_id) {\r\n      this.productAdd.addObject();\r\n    } else {\r\n      this.formErrors.order_id = \"* Please Select Order Number\";\r\n    }\r\n  }\r\n  onProductSubmit(data) {\r\n    console.log(\"data\", data);\r\n\r\n    this.productDetailList = [];\r\n    if (data && data.length > 0) {\r\n      data.filter((obj) => {\r\n        if (obj.tag_list && obj.tag_list.length > 0) {\r\n          obj.tag_list.filter((temp, i) => {\r\n            temp['id'] = i;\r\n            this.productDetailList.push(temp)\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      this.productDetailList = [];\r\n    }\r\n  }\r\n  submitForm(formData: any): void {\r\n    if (formData.valid) {\r\n      if (this.productDetailList && this.productDetailList.length > 0) {\r\n        let product_detail_list = []\r\n\r\n        this.productDetailList.map((obj) => {\r\n          let object = new Object();\r\n          object['product_id'] = obj.product.value;\r\n          object['weight_unit'] = obj.product.weight_unit;\r\n          object['weight'] = obj.product.weight;\r\n          object['product_qty'] = obj.product_qty;\r\n          object['tag_id'] = obj.tag.value;\r\n          product_detail_list.push(object);\r\n        });\r\n\r\n        this.formErrors.product = null;\r\n        this.showLoader = true;\r\n        const data = new FormData();\r\n        data.append('sales_order_id', formData.value.sales_order_id);\r\n        data.append('pack_type', formData.value.pack_type);\r\n        data.append('remark', formData.value.remark);\r\n        data.append('batch_no', formData.value.batch_no);\r\n        data.append('serial_no', formData.value.serial_no);\r\n        data.append('cartoon_no', formData.value.cartoon_no);\r\n        data.append('product_detail_list', JSON.stringify(product_detail_list));\r\n        if (this.isEditing) {\r\n          this.packingService.editPacking(this.editId, data).subscribe((response) => {\r\n            this.showLoader = false;\r\n            if (response.success) {\r\n              this.router.navigateByUrl('/outbound/packing');\r\n            } else {\r\n              response.error.map(obj => {\r\n                if (obj.hasOwnProperty('sales_order_id')) {\r\n                  this.formErrors['sales_order_id'] = obj['sales_order_id'];\r\n                } else {\r\n                  this.formErrors['apierror'] = `* ${response.error}`;\r\n                }\r\n              });\r\n            }\r\n          }, (error) => {\r\n            this.showLoader = false;\r\n          });\r\n        } else {\r\n          this.packingService.addPacking(data).subscribe((response) => {\r\n            this.showLoader = false;\r\n            if (response.success) {\r\n              this.router.navigateByUrl('/outbound/packing');\r\n            } else {\r\n              response.error.map(obj => {\r\n                if (obj.hasOwnProperty('sales_order_id')) {\r\n                  this.formErrors['sales_order_id'] = obj['sales_order_id'];\r\n                } else {\r\n                  this.formErrors['apierror'] = `* ${response.error}`;\r\n                }\r\n              });\r\n            }\r\n          }, (error) => {\r\n            this.showLoader = false;\r\n          });\r\n        }\r\n      } else {\r\n        this.formErrors.product = \"* Please Add Product\";\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddPackingComponent } from './add-packing.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { PackingService } from 'src/app/service/packing.service';\r\nimport { FormValidationModule } from 'src/app/shared/form-validation/form-validation.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { ProductListPopupModule } from 'src/app/common-module/product-list-popup/product-list-popup.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddPackingComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [AddPackingComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    FormsModule, ReactiveFormsModule,\r\n    FormValidationModule,\r\n    SharedModule,\r\n    NgSelectModule,\r\n    ProductListPopupModule,\r\n  ], providers: [PackingService]\r\n})\r\nexport class AddPackingModule { }\r\n"]}